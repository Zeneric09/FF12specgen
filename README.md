# FF12SpecGen

**FF12SpecGen** is a Python-based batch tool for generating **specular maps** from diffuse textures â€” built for *Final Fantasy XII* texture workflows and compatible pipelines.

## âœ¨ Features
- Dual generation modes (Reference-based & Diffuse-based)
- Smart material recognition (skin, matte, metal, shiny)
- Adaptive intensity control
- Edge enhancement and highpass detailing
- Multi-threaded batch processing with progress bar
- Auto folder mirroring and organized output

## ğŸ§© Requirements
```bash
pip install pillow numpy tqdm opencv-python
```

## ğŸš€ Usage
Place your textures beside the script and run:
```bash
python FF12SpecGen.py
```

When prompted:
```
Enter spec intensity (default 0.5):
Generate diffuse-based specs when no reference found? (y/n, default y):
```

Generated files are saved under:
```
/output/
```

## ğŸ§  How It Works
- If a `_spec.png` exists, it uses it as a reference to generate enhanced specular maps.
- If no reference exists and fallback is enabled, a procedural spec map is built from the diffuse.
- Otherwise, the texture is skipped.

## âš™ï¸ Technical Notes
- Uses NumPy and OpenCV for image math, Sobel edge detection, and Gaussian blurring.
- ThreadPoolExecutor ensures fast parallel processing.
- Supports up to 16 threads automatically.

## ğŸ“‚ Example
```
input/
 â”œâ”€â”€ weapon_diffuse.png
 â”œâ”€â”€ armor_diffuse.png
 â”œâ”€â”€ armor_spec.png
output/
 â”œâ”€â”€ weapon_spec.png
 â””â”€â”€ armor_spec.png
```

## Comparsion between vanilla spec map and new generated spec map by this script: 

Final Fantasy 12 TZA vanilla spec map:

![Alt text of the image](https://ptpimg.me/6i0zo1.png)

Spec map generated by this script:

![Alt text of the image](https://ptpimg.me/92hw16.png)



